# 무신사 AI Native Engineer 2차 코딩테스트 회고

## 2차 코딩테스트를 준비하며
2차 코딩테스트를 준비할 때, 가장 먼저 한 생각은
> ### 함께 일하는 환경에서 나에게 주어진 일이다.
> 
> 다른 팀원들과 함께 하는 상황이고, 나에게 주어진 업무이다. 그렇기 때문에, "다른 팀원들이 코드를 봤을 때 이해하기 쉽도록 일관성 있는 코드와 주석을 작성하면 좋겠다."
> 라는 생각으로 시작했다.

또, 해야할 일을 나름 정의해봤다.

```plain text
1. Claude Code의 5시간 지속되는 세션 토큰의 만료가 16:00가 되도록 하였다.
   - 시험 시간이 15:00 ~ 18:00 이므로, 3시간 동안 10시간의 토큰을 사용할 수 있다.
2. CLAUDE.md, AGENTS.md에 들어갈 내용을 미리 생각해 놓는다.
3. 과제가 어떻게 나올 지 모르지만, PROBLEM.md의 요구사항을 읽고 구현해내는 것이니, 
   sub agent의 역할을 어느 정도 미리 만들어놓자.
```




## AI에 입력한 프롬프트 이력 - 왜 그랬을까?

CLAUDE CODE의 토큰이 부족할 것으로 예상해, CLAUDE와 CODEX를 구분해서 활용했다.
> ### CLADUE와 CODEX 구분
>
> - 동일한 작업, 반복적인 요청(test code, analyze docs 등)은 CLAUDE의 sub agent에게 명령했다.
> - 이외 기능 구현 또는 생성된 코드에 대한 수정 요청 및 결정 사항은 CODEX에게 명령했다.

### 어떤 의도로 프롬프트를 작성하고, 이후 결과에 따른 생각

[CLAUDE] analyze-planner 서브 에이전트를 활용해서 PROBLEM.md를 읽고 요구사항을 분석해 개발 계획을 생성해주세요.

```plain text
미리 역할을 부여하고 핵심 업무를 나열해놓은 sub agent를 활용해 요구 사항을 분석하도록 했다.
프로젝트 구현 계획과 디렉토리 구조까지 잘 만들어주었지만, 나에게 익숙한 형태와는 살짝 달라서 일부 디렉토리 구조를 수정했다.
```

[CLAUDE] task-runner 서브 에이전트를 활용해서 @docs/PLAN.md FR-01을 먼저 구현해주세요.

```plain text
sub agent를 활용하는 명령을 해본 것은 사실 이번이 처음이었다.  
그래서 정상적으로 동작을 하는지 확인을 해보기 위해 이와 같은 프롬프트를 입력했다.
```

[CODEX] @PROBLEM.md 데이터 구축 요구사항을 읽고 해당 기능을 만족하는 기능을 구현해주세요.

```plain text
위 명령을 실행시켜놓은 후, 요구사항을 읽는 중 데이터 구축 요구사항이 보여 CODEX에게 해당 기능을 구현하도록 입력했다.

> 여기부터가 준비한대로 sub agent를 활용하지 못한 시작이었던 것같다. 
> PLAN.md를 보고 순차적으로 했어야 했는데, 마음이 급해져 놓쳤다.  
```

[CLAUDE] test-runner 서브 에이전트를 활용해 DataInitializer 기능에 대한 테스트 코드를 작성해주세요. (요청 사항의 데이터 개수 및 동작 시간을 반드시 체크해주세요.)

```plain text
CODEX가 만든 DataInitializer 기능을 CLAUDE의 test-runner sub agent를 활용해 코드를 작성하도록 했다.  
또한, 요구 사항에 작성되어 있는 요청 사항에 대한 세부 내용을 언급하며 빠뜨리는 내용이 없도록 했다.
```

[CODEX] @PROBLEM.md 비즈니스 규칙(정원, 학점, 시간 충돌 등)을 반드시 지키며 기획팀 요청 사항 중 수강 취소 기능을 고려하며 수강 신청 기능을 만들어주세요.

```plain text

```


[CODEX] @EnrollmentService
1. Course course = courseRepository.findByIdForUpdate(request.getCourseId())
.orElseThrow(() -> new CustomException(ErrorCode.NOT_FOUND, "강좌를 찾을 수 없습니다"));
2. if (enrollmentRepository.existsByStudentIdAndCourseId(student.getId(), course.getId())) {
throw new CustomException(ErrorCode.DUPLICATE_ENROLLMENT);
}
를 보면 예외처리 형식이 동일하지 않습니다. "모든 코드를 throw new CustomException(ErrorCode.DUPLICATE_ENROLLMENT);" 형태로 동일하게 만들어주세요. ErrorCode에 새로운 상수를 만들어도 좋습니다.

```plain text
Agent가 작성한 코드를 보니, 일관성이 맞지 않는 부분이 보였다. 
따라서, @EnrollmentService라는 파일만 읽도록 컨텍스트를 제공하고 내 의도와 다르게 작성된 부분을 수정하도록 하였다.
여러 개의 세션에서, 두 종류의 AI Agent를 활용하는 상황이었기에 이러한 컨텍스트 제공은 반드시 필요하다.

이처럼 컨텍스트 엔지니어링이 중요하다고 생각을 한다. 
- 내가 생각하는 컨텍스트 엔지니어링이란, 원하는(의도한) 결과를 얻기 위해 효율적인 토큰 셋을 찾는 것이다.
```

[CODEX] 학생 목록 조회 / 강좌 목록 조회 (전체, 학과별 - 정원/현재 인원/시간 정보 포함) / 교수 목록 조회 에 대한 UnitTest, IntegrationTest을 작성해주세요. 정상 요청 상황, 에러 응답 상황 모두 테스트에 포함되어야 합니다.

```plain text

```

[CODEX] 현재 예외 처리되어 있는 부분 이외에 사용자가 요청할 때 잘못 요청할 여지가 있는 부분이 있나요?

```plain text
예외 처리를 하다보니, 요구 사항에 분명하게 정의되어있지 않은 내용들에 대한 예외 처리를 확인하기 위해 이 프롬프트를 입력했다.

> 코드를 직접 확인하며, 예외 상황을 생각하고 명확하게 전달을 했다면 더 좋았을 것같다.
> 조급하다보니, 러프하게 질문한 부분들이 많았던 것같다. 
```

[CODEX] 1. 정원 초과를 방지하는 동시성 제어 메커니즘을 반드시 구현 2. 동시성 제어 전략 락 메커니즘, 트랜잭션 격리 레벨 등) 이 두 가지가 어떻게 구현되어 있는지 설명해주세요.

```plain text

```

[CODEX] @REQUIREMENTS.md 동시성 제어 전략을 읽고 빠뜨리는 내용없이 이에 맞게 구현해주세요.

```plain text

```

[CLAUDE] test-planner 서브 에이전트를 활용해 수강 신청 기능에 대해  "정원이 1명 남은 강좌에 100명이 동시에 신청해도, 정확히 1명만 성공해야 합니다. 절대 정원을 초과해서는 안 됩니다."와 같은 규칙을 지키며 테스트 플랜을 세워주세요.

```plain text
위에서 구현된 코드에 따라 테스트 계획을 세우도록 하였다.
여기서 동시성만큼은 순차적으로 테스트를 하며 문제없이 완성하도록 해야한다고 생각이 들었다.
```

[CLAUDE] test-runner로 P0 테스트부터 구현해주세요. 기존 코드에서 부족한 부분이 있으면 수정하는 방향으로 하면 됩니다.

```plain text
위에서 구현된 
```

[CODEX] @PROBLEM.md 현재 구현된 코드 중에 부족한 부분에 어떤 것이 있는지 알려주세요. 직접 코드를 수정하지는 말아주세요.

```plain text
이 때는, 시간이 얼마 남지 않아 가장 중요한 것은 "서버 구동"이기 때문에, 다음과 같이 생각했다.
1. 새로운 코드를 생성하다가 동작하지 않는 불상사는 피하자.
2. 부족한 부분 중 시간 안에 가능한 일들을 처리하자.
```

[CODEX] 이제 문서화 작업을 진행할 것입니다. README.md에 빌드 및 실행 방법을 작성하고 이미 존재한다면 다시 한 번 확인해주세요.
```plain text
막바지가 다가와 서버 구동이 되는지 확인하는 입력이다.
```

[CODEX] 구현되어있는 코드에 맞게 request, response, error 응답, sucess 응답을 모두 docs/API.md 반영해주세요.

```plain text
시간이 얼마 남지 않아 조급한 마음으로 러프하게 질문을 했다.
바로 확인할 수 있는 swagger 문서를 보고, 최대한 비슷하게 API 문서를 작성하도록 요청했다. 
```

## 잘 하지 못한 것
1. 준비했던 sub-agent들을 계획한대로 활용하지 못한 것
2. 내가 수정한 디렉토리 구조를 즉시, CLAUDE.md와 AGENTS.md에 동기화하지 못한 것
3. 컨텍스트 엔지니어링을 잘 하지 못한 것
   - 하위 디렉토리에 가이드 파일(CLAUDE.md, AGENTS.md)을 제공하지 못했다.
4. 토큰이 생각보다 더 빨리 소진되어 test-planner sub agent의 model을 sonnet으로 변경한 것
   - Claude Code 모델은 opus가 더 똑똑하고, sonnet이 덜 똑똑하게 설계가 되었다.
   - 그렇기 때문에, plan을 opus가 세우고, sonnet이 코드를 작성하도록 하는 것이 더 나은 방법일 수 있다.
5. 조급해지니, 러프하게 질문한 부분들이 많았던 것같다. 조금 더 명확하게 질문했으면.. 하는 생각이 든다.

> [구현하지 못한 것]  
> 동일 학생 동시 신청 시 학점 초과 가능
> - 정원 초과를 방지하기 위한 동시성에만 주의가 집중되어 이 부분을 고려하지 못했다.
> 
> 


## 총 정리
> 코딩테스트의 요구사항이 복잡하지 않았기에 이 정도로 마무리 할 수 있었던 것이다.  
> 나는 AI Native Engineer로써 컨텍스트 엔지니어링을 한 것이 아니라, 단순히 AI에게 질문하고 응답받는 식으로 겨우 구동되는 서버를 제출한 것이었다.  
> 주어진 시간이 더 길고, 더 복잡한 요구사항이었다면 시험 중간에 난항을 겪었을 가능성이 높다.

> ### **무신사 AI Native Engineer가 되고 싶은 이유**  
> 지금은 더 확신이 생겼다.  
> 무신사에서는 현재 AI Agent를 활용한 개발을 하는 것에 열려있다.  
> 또, 2차 코딩테스트를 준비하면서 AI Agent를 활용한다는 것에 대해서 정말 많이 알게 되었다.  
> 회고를 통해 부족했던 것을 알고, 이를 AI 도구 사용을 지원하는 무신사에서 정말 열심히 학습하고 성장하며 회사에 기여하는 개발자가 될 수 있을 것같다.
